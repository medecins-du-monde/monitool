<ol class="breadcrumb noprint">
	<li ng-if="$root.userCtx.type == 'user'"><a ui-sref="main.projects" translate="shared.projects"></a></li>
	<li class="active" title="{{$ctrl.project.country}}" ng-bind="$ctrl.project.country|maxLength:20"></li>
	<li class="active" title="{{$ctrl.project.name}}" ng-bind="$ctrl.project.name|maxLength:50"></li>
	<li class="active" translate="project.users"></li>
</ol>

<div class="alert alert-info" translate="project.users_list_info"></div>

<legend translate="project.users"></legend>

<table class="table table-bordered table-stripped table-condensed">
	<thead>
		<tr>
			<th style="width: 30px"></th>
			<th translate="shared.name"></th>
			<th translate="project.username"></th>
			<th style="width: 150px" translate="project.user_role"></th>
			<th style="width: 60%" translate="project.authorization"></th>
		</tr>
	</thead>
	<tbody ng-if="$ctrl.editableProject.users.length == 0">
		<tr>
			<td colspan="5" style="text-align: center" translate="project.no_users"></td>
		</tr>
	</tbody>

	<tbody ng-sortable="$ctrl.sortableOptions">
		<tr ng-repeat="user in $ctrl.editableProject.users">
			<td class="handle"><i class="fa fa-sort fa-fw"></i></td>
			<td>
				<a ng-click="$ctrl.onEditUserClicked(user)">
					{{user.name || $ctrl.usersById[user.id].name}}
				</a>
			</td>
			<td>
				<img src="user-list-logo.svg" style="height: 17px" ng-if="user.type=='internal'" />
				{{user.username}}
			</td>
			<td>{{('project.user_roles.' + user.role)|translate}}</td>
			<td>
				<span ng-if="user.role == 'input'">
					<span translate="project.collection_site_list" style="font-weight: bold"></span>:
					{{user.entities|getObjects:$ctrl.project.entities|pluck:'name'|join:', '}}
					<br/>

					<span translate="project.collection_form_list" style="font-weight: bold"></span>:
					{{user.dataSources|getObjects:$ctrl.project.forms|pluck:'name'|join:', '}}
				</span>
			</td>
		</tr>
	</tbody>
	<tfoot>
		<tr>
			<td colspan="5" style="text-align: center">
				<a class="btn btn-default btn-xs" ng-click="$ctrl.onEditUserClicked()">
					<i class="fa fa-plus"></i>
					<span translate="shared.add"></span>
				</a>
			</td>
		</tr>
	</tfoot>
</table>
